---
- name: Check for required CLI tools
  ansible.builtin.command: "command -v {{ tool }}"
  loop: [age, flux, git, gitops, pip3, sops, task]
  loop_control:
    loop_var: tool
  changed_when: false
  check_mode: false
  register: result
  failed_when: result.rc != 0 and result.rc != 127
